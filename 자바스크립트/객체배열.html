<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <h1>객체배열</h1>
</body>
</html>
<script>
  //객체배열로 만들기
  let person = [
    {"name":"홍길동","age":43},
    {"name":"임꺽정","age":34},
    {"name":"강조","age":32},
    {"name":"장길산","age":23},
    {"name":"홍경래","age":24},
    {"name":"이징옥","age":25}
  ];
  //출력방식
  console.log( person[0].name )
  console.log( person[0]['name'])
  //값 변경 (전통적)
  person[0].name = "홍갑수"
  for(i=0; i<person.length; i++){
    console.log(person[i].name,person[i].age)
  };

  console.log("----------in 연산자 사용 ---------")
  //in 연산자 사용
  for(i in person){
    console.log(i, person[i].name, person[i].age);
  }

console.log("----------of 연산자 사용 ---------")
  //of 연산자 : 각객채를 하나씩 가져온다
  for(ob of person){
    console.log(ob.name,ob.age)
  }

  console.log("----------forEach 연산자 사용 ---------")

  person.forEach(element => {
    console.log( element.name,element.age  )
    // console.log( element['name','age']  ) //age만 나온다. 따로따로 해야지 둘다 나온다.
  });

  
  console.log("--------- 입력 검색 ---------")
  //이름으로 검색하고싶음
  let name = "윤달";
  let search = person.find((item) => {
    console.log( typeof item  ) //객체로넘어온다. 출력할때 왜 3이 나오는가? 강조찾으려는데 3번정도 돌았다. 없으면 계속간다.
    return item.name == name;
  });
  if (search == undefined){
    console.log(`${name}은 없습니다`)
  }else{
    console.log(search.name,search.age)
  }

  console.log("--------- 연습문제 ---------")
  //1. 30대 이상인 사람들 목록만 추출
  tt30 = person.filter(item => item.age >=30);
  tt30.forEach(item=>{
    console.log(item);
  });
  //2. 30대 이상인 사람들은 모두 몇명인가
  console.log(tt30.length)
  //3. 성이 홍씨인 사람들 목록만 추출하기
  tt30 = person.filter(item =>item.name[0]=='홍').forEach(item=>console.log(item));
  //4. 성이 홍씨인 사람들의 나이의 합 구하기
  cnt = person.filter(item =>item.name[0]=='홍').reduce((prev,current)=>{
                     prev.age = prev.age+current.age;
                     return prev;
                 })
  console.log( cnt.age )
  
  // 자바스크립트는 문자열에 비교연산자가 있다

  // 정렬 :이름순으로 하기
  person3 = person.sort((pn1, pn2) =>{ if(pn1.name > pn2.name)
      return -1;
    else if(pn1.name == pn2.name)
      return 0;
    else 
      return 1});
  console.log(person3);

  // 역순정렬: 
  person4 = person.sort((pn1, pn2) =>{ if(pn1.name > pn2.name)
      return 1;
    else if(pn1.name == pn2.name)
      return 0;
    else 
      return -1});
  console.log(person4);

  // 쉽게 한줄로 정렬
  // person3 = person.sort((pn1, pn2) => (pn1.name < pn2.name) ? 1 : -1);
  // console.log(person3);

</script>